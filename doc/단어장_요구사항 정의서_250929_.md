# 단어장 프로그램 요구사항 정의서

**프로젝트명:** 스마트 단어장 (Smart Vocabulary Builder)  
**작성일:** 2025년 9월 29일  
**버전:** 1.0  
**작성자:** AI Software Student Team

---

## 1. 프로젝트 개요

### 1.1 프로젝트 목적
고등학교 수험생과 대학생이 효율적으로 단어를 암기하고 장기 기억으로 전환할 수 있도록 지원하는 개인화된 단어장 프로그램 개발

### 1.2 프로젝트 범위
- **개발 플랫폼**: Windows PC 독립 실행 프로그램
- **개발 언어**: Python
- **타겟 사용자**: 고등학교 수험생, 대학생
- **주요 가치**: 장기 기억 촉진, 성적 향상, 개인화 학습

### 1.3 프로젝트 제약사항
- 개발 기간: 7-11주
- 개발 언어: Python 사용 필수
- 데이터베이스: SQLite 로컬 DB 사용
- 운영 환경: Windows 10 이상
- 인터넷 연결: 오프라인 작동 필수

---

## 2. 기능적 요구사항

### 2.1 단어 관리 기능

#### FR-101: 단어 추가
- 사용자는 영어 단어와 한국어 뜻을 입력하여 단어를 추가할 수 있어야 한다
- 각 단어는 고유 식별자(ID)를 자동으로 부여받아야 한다
- 단어 추가 시 생성 날짜가 자동으로 기록되어야 한다

#### FR-102: 단어 수정
- 사용자는 등록된 단어의 영어, 한국어, 메모를 수정할 수 있어야 한다
- 단어 수정 시 수정 날짜가 자동으로 기록되어야 한다
- 수정된 단어는 별도 목록에서 확인 가능해야 한다

#### FR-103: 단어 삭제
- 사용자는 등록된 단어를 삭제할 수 있어야 한다
- 삭제 시 확인 메시지를 표시해야 한다
- 삭제된 단어는 데이터베이스에서 영구적으로 제거되어야 한다

#### FR-104: 단어 조회
- 사용자는 전체 단어 목록을 조회할 수 있어야 한다
- 단어 목록은 영어, 한국어, 오답률, 마지막 학습일, 즐겨찾기 여부를 표시해야 한다
- 목록은 알파벳 순, 오답률 순, 최근 학습일 순으로 정렬 가능해야 한다

#### FR-105: 단어 검색
- 사용자는 영어 단어로 검색할 수 있어야 한다
- 사용자는 한국어 뜻으로 검색할 수 있어야 한다
- 부분 일치 검색을 지원해야 한다

#### FR-106: 단어 필터링
- 오답률별 필터링 (취약/주의/양호)
- 즐겨찾기 단어만 보기
- 학습 안 한 단어만 보기
- 최근 수정한 단어만 보기

#### FR-107: CSV 파일 업로드
- 사용자는 CSV 파일 형식으로 단어를 일괄 업로드할 수 있어야 한다
- CSV 파일 형식: `영어, 한국어, 메모(선택)` 컬럼
- UTF-8 인코딩을 사용해야 한다
- 중복 단어 감지 시 사용자에게 선택 옵션을 제공해야 한다 (덮어쓰기/건너뛰기/병합)

#### FR-108: CSV 파일 다운로드
- 사용자는 단어장을 CSV 파일 형식으로 다운로드할 수 있어야 한다
- 전체 단어 또는 필터링된 단어만 선택적으로 다운로드 가능해야 한다
- 다운로드 파일은 UTF-8 인코딩을 사용해야 한다

#### FR-109: 단어 메모 기능
- 사용자는 각 단어에 개인 메모를 작성할 수 있어야 한다
- 메모는 플래시카드 학습 시 확인 가능해야 한다
- 메모는 수정 및 삭제 가능해야 한다

---

### 2.2 플래시카드 학습 기능

#### FR-201: 학습 모드 선택
- 영어→한국어 모드: 영어 단어를 보고 한국어 뜻 맞추기
- 한국어→영어 모드: 한국어 뜻을 보고 영어 단어 맞추기
- 사용자는 학습 시작 전 모드를 선택할 수 있어야 한다

#### FR-202: 출제 순서 방식
- **순차 모드**: 단어장에 등록된 순서대로 출제
- **랜덤 모드**: 완전 무작위 순서로 출제
- **개인화 모드**: 오답률이 높은 단어가 더 자주 출제되도록 가중치 적용
- 사용자는 학습 시작 전 출제 순서를 선택할 수 있어야 한다

#### FR-203: 답안 표시 방식
- **블라인드 모드**: 답을 가린 채로 사용자가 먼저 생각한 후 확인
- **노출 모드**: 답을 함께 표시하여 빠른 확인 학습
- 사용자는 학습 중 답안 표시 방식을 전환할 수 있어야 한다

#### FR-204: 정답/오답 피드백
- 사용자의 답변 후 즉시 정답/오답 여부를 표시해야 한다
- 정답 시: 초록색 배경과 ✓ 아이콘 표시
- 오답 시: 빨간색 배경과 ✗ 아이콘 표시 및 올바른 답 제시

#### FR-205: 학습 진행 상황 표시
- 현재 학습 중인 카드 번호 / 전체 카드 수 표시 (예: 5/20)
- 진행률 바(Progress Bar) 시각적 표시
- 남은 카드 수 표시

#### FR-206: 오답률 시각적 표시
- 오답률에 따라 단어를 색상으로 구분 표시
  - 빨강: 오답률 70% 이상 (집중 학습 필요)
  - 주황: 오답률 40-70% (주의 필요)
  - 초록: 오답률 40% 미만 (양호)
  - 회색: 학습 이력 없음 (신규)

#### FR-207: 학습 세션 완료
- 학습 세션 종료 시 결과 요약 표시
  - 학습한 단어 수
  - 정답 수 / 오답 수
  - 정답률
  - 학습 소요 시간

#### FR-208: 즐겨찾기 (학습 중)
- 학습 중 별표 아이콘 클릭으로 단어를 즐겨찾기할 수 있어야 한다
- 즐겨찾기 상태는 즉시 반영되어야 한다

#### FR-209: 답변 제한 시간 설정
- 사용자는 카드당 답변 제한 시간을 설정할 수 있어야 한다 (5초, 10초, 15초, 무제한)
- 제한 시간 설정 시 카운트다운 타이머를 표시해야 한다
- 시간 초과 시 자동으로 다음 카드로 넘어가야 한다

---

### 2.3 학습 이력 기록 기능

#### FR-301: 학습 데이터 기록
- 각 단어의 정답 횟수를 누적 기록해야 한다
- 각 단어의 오답 횟수를 누적 기록해야 한다
- 각 단어의 총 학습 시도 횟수를 기록해야 한다
- 각 단어의 마지막 학습 날짜를 기록해야 한다
- 각 학습의 응답 시간을 기록해야 한다

#### FR-302: 학습 세션 기록
- 각 학습 세션의 시작 시간을 기록해야 한다
- 각 학습 세션의 종료 시간을 기록해야 한다
- 학습 세션에서 학습한 단어 목록을 기록해야 한다
- 학습 세션의 정답률을 계산하여 기록해야 한다

#### FR-303: 오답률 계산
- 오답률 = (오답 횟수) / (총 학습 횟수) × 100
- 오답률은 실시간으로 업데이트되어야 한다
- 최소 3회 이상 학습한 단어만 오답률을 표시해야 한다

---

### 2.4 단어 시험 기능

#### FR-401: 시험 설정
- 사용자는 시험 문항 수를 설정할 수 있어야 한다 (10문제, 20문제, 50문제, 전체)
- 사용자는 시험 범위를 선택할 수 있어야 한다
  - 전체 단어장
  - 특정 범위 (예: 1~100번 단어)
  - 즐겨찾기 단어만
  - 오답률 높은 단어만

#### FR-402: 시험 출제 순서
- **랜덤 순서**: 완전 무작위 출제
- **개인화 순서**: 오답률 높은 단어 우선 출제 (가중치 적용)
- 사용자는 시험 시작 전 출제 순서를 선택할 수 있어야 한다

#### FR-403: 단답형 시험
- 영어→한국어 단답형: 영어 단어 보고 한국어 입력
- 한국어→영어 단답형: 한국어 뜻 보고 영어 단어 입력
- 텍스트 입력 후 엔터키 또는 "제출" 버튼으로 답안 제출
- 대소문자는 구분하지 않아야 한다

#### FR-404: 객관식 시험
- 4지선다 또는 5지선다 형식
- 사용자는 선택지 개수를 설정할 수 있어야 한다
- 오답 선택지는 유사한 뜻의 단어, 유사한 철자의 단어, 랜덤 단어로 구성
- 영어→한국어, 한국어→영어 모두 지원

#### FR-405: 시험 진행 상황 표시
- 현재 문제 번호 / 전체 문제 수 표시
- 진행률 바 표시
- 남은 시간 표시 (제한 시간 설정 시)

#### FR-406: 시험 제한 시간 설정
- 사용자는 전체 시험 제한 시간을 설정할 수 있어야 한다
- 사용자는 문항당 제한 시간을 설정할 수 있어야 한다
- 시간 종료 시 자동으로 시험을 제출해야 한다

#### FR-407: 시험 결과 표시
- 총점 및 정답률 표시
- 정답 개수 / 전체 문항 수 표시
- 소요 시간 표시
- 틀린 문제 목록 상세 표시 (내가 입력한 답 vs 정답)

#### FR-408: 시험 이력 저장
- 모든 시험 기록을 데이터베이스에 저장해야 한다
- 시험 날짜, 범위, 문항 수, 점수, 소요 시간을 기록해야 한다
- 과거 시험 결과를 조회할 수 있어야 한다

---

### 2.5 오답 노트 기능

#### FR-501: 오답 노트 자동 생성
- 시험 종료 후 틀린 단어를 자동으로 "오답 노트"에 추가해야 한다
- 오답 노트는 생성 날짜를 기록해야 한다
- 동일한 단어가 중복 추가되지 않아야 한다

#### FR-502: 오답 노트 복습 모드
- 사용자는 "오답 노트 복습하기" 버튼으로 즉시 복습을 시작할 수 있어야 한다
- 오답 노트 복습은 플래시카드 형식으로 제공되어야 한다
- 복습 후 다시 틀린 단어는 오답 노트에 계속 유지되어야 한다

#### FR-503: 오답 노트 관리
- 사용자는 오답 노트 목록을 조회할 수 있어야 한다
- 완전히 숙지한 단어는 오답 노트에서 제거할 수 있어야 한다
- 여러 시험의 오답을 통합하여 볼 수 있어야 한다

---

### 2.6 학습 통계 기능

#### FR-601: 오늘 통계
- 오늘 학습한 단어 수 표시
- 오늘 학습 시간 표시
- 오늘 정답률 표시
- 오늘 시험 본 횟수 및 평균 점수 표시

#### FR-602: 전체 통계
- 총 학습 단어 수 (고유 단어 개수) 표시
- 총 누적 학습 시간 표시
- 전체 평균 정답률 표시
- 총 시험 횟수 및 평균 점수 표시

#### FR-603: 단어 숙지도 분류
- 완전 숙지 (정답률 90% 이상): X개
- 어느 정도 숙지 (정답률 70-90%): X개
- 취약 (정답률 70% 미만): X개
- 미학습 (학습 이력 없음): X개

#### FR-604: 취약 단어 분석
- 가장 많이 틀린 단어 TOP 10 표시
- 오답률 높은 단어 목록 제공
- 취약 단어를 색상으로 강조 표시

#### FR-605: 연속 학습일 (스트릭)
- 연속으로 학습한 일수를 기록하고 표시해야 한다
- 하루라도 학습하지 않으면 0으로 초기화되어야 한다
- 최장 연속 학습 기록을 별도로 보관해야 한다

---

### 2.7 학습 목표 관리 기능

#### FR-701: 일일 학습 목표 설정
- 사용자는 하루 학습할 단어 개수 목표를 설정할 수 있어야 한다
- 사용자는 하루 학습 시간 목표를 설정할 수 있어야 한다
- 설정한 목표는 저장되어 매일 적용되어야 한다

#### FR-702: 목표 달성률 표시
- 현재 목표 대비 달성률을 실시간으로 퍼센트로 표시해야 한다
- 목표 달성 시 축하 메시지를 표시해야 한다
- 목표 미달 시 남은 학습량을 표시해야 한다

#### FR-703: 목표 달성 알림
- 목표 달성 시 긍정적인 피드백 메시지를 표시해야 한다
- 목표 미달 시 격려 메시지를 표시해야 한다

---

### 2.8 즐겨찾기 기능

#### FR-801: 즐겨찾기 추가/해제
- 플래시카드 학습 중 별표 아이콘으로 즐겨찾기 가능
- 단어 관리 화면에서 단어 목록에서 별표 클릭으로 즐겨찾기 가능
- 시험 결과 화면에서 특정 단어를 즐겨찾기 가능
- 즐겨찾기 해제도 동일한 방식으로 가능

#### FR-802: 즐겨찾기 목록 조회
- 별도 탭 또는 필터로 즐겨찾기한 단어만 모아서 볼 수 있어야 한다
- 즐겨찾기 개수를 표시해야 한다

#### FR-803: 즐겨찾기 활용
- 즐겨찾기 단어만으로 플래시카드 학습 가능
- 즐겨찾기 단어만으로 시험 가능
- 즐겨찾기 단어만 CSV로 내보내기 가능

---

### 2.9 개인화 학습 기능

#### FR-901: 개인화 가중치 알고리즘
- 오답률 70% 이상 단어: 출제 확률 3배
- 오답률 40-70% 단어: 출제 확률 2배
- 오답률 40% 미만 단어: 출제 확률 1배
- 신규 단어 (학습 3회 미만): 출제 확률 1.5배

#### FR-902: 개인화 모드 적용
- 플래시카드의 "개인화 모드" 선택 시 가중치 알고리즘 적용
- 시험의 "개인화 순서" 선택 시 가중치 알고리즘 적용
- 가중치는 학습 데이터가 업데이트될 때마다 실시간 재계산

#### FR-903: 복습 우선순위 관리
- 오답률이 높을수록 높은 우선순위 부여
- 학습한 지 오래된 단어에 높은 우선순위 부여
- 우선순위 점수 = (오답률 × 0.6) + (복습 지연 일수 × 0.4)

---

### 2.10 사용자 인터페이스 기능

#### FR-1001: 메인 메뉴
- 단어 암기, 단어 관리, 시험, 학습 통계, 설정 메뉴 제공
- 각 메뉴는 명확한 한글 레이블을 가져야 한다
- 메뉴 간 전환은 3클릭 이내로 가능해야 한다

#### FR-1002: 설정 메뉴
- 학습 목표 설정
- 답변 제한 시간 설정
- 폰트 크기 조절
- 다크모드/라이트모드 전환
- 설정 값은 저장되어 다음 실행 시 유지되어야 한다

#### FR-1003: 도움말 및 튜토리얼
- 첫 실행 시 온보딩 튜토리얼 제공
- 각 주요 화면에 "?" 버튼으로 도움말 접근 가능
- 튜토리얼은 건너뛰기 가능해야 한다

#### FR-1004: 키보드 단축키
- 주요 기능은 키보드 단축키로 접근 가능해야 한다
- Ctrl+1: 단어 암기, Ctrl+2: 단어 관리, Ctrl+3: 시험, Ctrl+4: 통계
- F1: 도움말, Esc: 뒤로 가기

---

## 3. 비기능적 요구사항

### 3.1 오류 로깅 (Error Logging)

#### NFR-101: 로깅 시스템 구현
- 시스템은 모든 중요한 이벤트를 로그 파일에 기록해야 한다
- 로그 레벨: DEBUG, INFO, WARNING, ERROR, CRITICAL
- 로그 형식: `[날짜 시간] [레벨] [모듈명] 메시지`
- 예시: `[2025-09-29 14:30:15] [ERROR] [database] 데이터베이스 연결 실패`

#### NFR-102: 로그 저장 위치
- 로그 파일은 프로그램 설치 폴더의 `logs/` 디렉토리에 저장되어야 한다
- 로그 파일명 형식: `app_YYYYMMDD.log` (날짜별 분리)
- 로그 파일은 최대 7일치를 보관하고 오래된 파일은 자동 삭제되어야 한다

#### NFR-103: 로그 내용
- 프로그램 시작 및 종료 이벤트
- 데이터베이스 연결/쿼리 실행
- 파일 업로드/다운로드 작업
- 사용자 주요 액션 (단어 추가, 학습 시작, 시험 완료 등)
- 모든 예외 및 에러 (스택 트레이스 포함)
- 성능 관련 정보 (응답 시간이 1초 이상인 작업)

#### NFR-104: 에러 처리
- 모든 예외는 try-except 블록으로 처리되어야 한다
- 치명적 오류 발생 시 사용자에게 이해하기 쉬운 오류 메시지를 표시해야 한다
- 오류 발생 시에도 프로그램이 비정상 종료되지 않도록 해야 한다
- 예외 발생 시 스택 트레이스를 로그 파일에 기록해야 한다

#### NFR-105: 디버그 모드
- 개발 환경에서는 DEBUG 레벨 로그를 모두 기록해야 한다
- 프로덕션 환경에서는 INFO 레벨 이상만 기록해야 한다
- 설정 파일 또는 환경 변수로 로그 레벨을 변경할 수 있어야 한다

---

### 3.2 모듈화 설계 (Modular Design)

#### NFR-201: 계층적 구조
- 시스템은 Presentation Layer, Business Logic Layer, Data Access Layer로 분리되어야 한다
- **Presentation Layer**: UI 관련 코드 (화면 표시, 사용자 입력 처리)
- **Business Logic Layer**: 핵심 로직 (학습 알고리즘, 통계 계산, 개인화 로직)
- **Data Access Layer**: 데이터베이스 접근 및 파일 입출력

#### NFR-202: 독립적인 모듈
- 각 모듈은 독립적으로 개발, 테스트, 유지보수 가능해야 한다
- 한 모듈의 변경이 다른 모듈에 최소한의 영향을 주어야 한다
- 모듈 간 통신은 명확히 정의된 인터페이스를 통해서만 이루어져야 한다

#### NFR-203: 주요 모듈 분리
시스템은 다음과 같은 주요 모듈로 구성되어야 한다:

**데이터 관리 모듈 (`data_manager.py`)**
- 단어 CRUD 기능
- 학습 이력 기록 및 조회
- 통계 데이터 집계

**학습 모듈 (`learning.py`)**
- 플래시카드 학습 로직
- 출제 순서 알고리즘 (순차/랜덤/개인화)
- 학습 세션 관리

**시험 모듈 (`exam.py`)**
- 시험 문제 생성
- 답안 채점
- 시험 결과 처리

**통계 모듈 (`statistics.py`)**
- 오답률 계산
- 학습 통계 집계
- 숙지도 분류

**개인화 모듈 (`personalization.py`)**
- 가중치 계산 알고리즘
- 복습 우선순위 계산
- 오답 노트 관리

**파일 처리 모듈 (`file_handler.py`)**
- CSV 파일 업로드/다운로드
- 데이터 유효성 검증
- 파일 형식 변환

**데이터베이스 모듈 (`database.py`)**
- SQLite 연결 관리
- SQL 쿼리 실행
- 트랜잭션 처리

**UI 모듈 (`ui/`)**
- 메인 화면, 학습 화면, 시험 화면, 통계 화면 등
- 각 화면은 별도 파일로 분리

#### NFR-204: 설정 관리
- 설정 값은 코드와 분리하여 `config.py` 또는 `settings.json` 파일에 저장되어야 한다
- 데이터베이스 경로, 로그 설정, 기본값 등을 설정 파일에서 관리해야 한다
- 설정 변경 시 재컴파일이 불필요해야 한다

#### NFR-205: 의존성 관리
- 외부 라이브러리 의존성은 `requirements.txt`에 명시되어야 한다
- 각 모듈의 import 문은 파일 상단에 명확히 정리되어야 한다
- 순환 참조(circular import)가 발생하지 않도록 설계되어야 한다

---

### 3.3 코드 문서화 (Code Documentation)

#### NFR-301: 코드 스타일 가이드
- 모든 Python 코드는 PEP 8 스타일 가이드를 준수해야 한다
- 들여쓰기: 공백 4칸
- 한 줄 최대 길이: 79자
- 함수와 클래스 사이: 2줄 공백
- 변수명: snake_case, 클래스명: PascalCase, 상수명: UPPER_CASE

#### NFR-302: 함수 및 클래스 문서화 (Docstring)
- 모든 함수와 클래스는 docstring을 포함해야 한다
- Docstring은 Google 스타일 또는 NumPy 스타일을 따라야 한다
- Docstring에 포함할 내용:
  - 함수/클래스의 목적 및 기능 설명
  - 매개변수 (Parameters): 이름, 타입, 설명
  - 반환값 (Returns): 타입, 설명
  - 예외 (Raises): 발생 가능한 예외 및 조건
  - 사용 예시 (Examples): 간단한 코드 예제 (선택)

**예시:**
```python
def calculate_wrong_rate(correct_count, wrong_count):
    """
    단어의 오답률을 계산한다.
    
    Args:
        correct_count (int): 정답 횟수
        wrong_count (int): 오답 횟수
    
    Returns:
        float: 오답률 (0.0 ~ 100.0)
    
    Raises:
        ValueError: 정답 횟수와 오답 횟수가 모두 0일 경우
    
    Examples:
        >>> calculate_wrong_rate(7, 3)
        30.0
    """
    total = correct_count + wrong_count
    if total == 0:
        raise ValueError("학습 이력이 없는 단어입니다.")
    return (wrong_count / total) * 100
```

#### NFR-303: 주석 작성
- 복잡한 로직이나 알고리즘은 주석으로 설명을 추가해야 한다
- 주석은 코드가 "무엇을" 하는지보다 "왜" 그렇게 하는지를 설명해야 한다
- TODO, FIXME, HACK 등의 태그를 사용하여 향후 작업 표시
- 예시:
  ```python
  # TODO: 간격 반복 알고리즘을 SM-2로 업그레이드 필요
  # FIXME: 대용량 CSV 파일 처리 시 메모리 부족 문제 해결 필요
  ```

#### NFR-304: 모듈 문서화
- 각 Python 파일 상단에 모듈 설명 docstring을 작성해야 한다
- 모듈의 목적, 주요 클래스/함수, 작성자, 작성일을 포함해야 한다

**예시:**
```python
"""
단어 학습 모듈

이 모듈은 플래시카드 학습 기능을 제공한다.
순차, 랜덤, 개인화 출제 모드를 지원하며,
학습 이력을 데이터베이스에 기록한다.

주요 클래스:
    - FlashCardSession: 플래시카드 학습 세션 관리
    - LearningEngine: 학습 로직 및 알고리즘

작성자: AI Software Student Team
작성일: 2025-09-29
"""
```

#### NFR-305: README 문서
- 프로젝트 루트에 `README.md` 파일을 작성해야 한다
- README에 포함할 내용:
  - 프로젝트 개요 및 목적
  - 주요 기능 소개
  - 설치 방법 및 요구사항
  - 실행 방법
  - 프로젝트 구조 설명
  - 기여 방법 (선택)
  - 라이선스 정보

#### NFR-306: API 문서
- 주요 모듈의 공개 API는 별도 문서로 정리되어야 한다
- Sphinx 또는 MkDocs를 사용한 자동 문서 생성 권장 (선택)
- 최소한 주요 함수와 클래스의 사용법을 문서화해야 한다

#### NFR-307: 변경 이력 문서
- `CHANGELOG.md` 파일을 작성하여 버전별 변경 사항을 기록해야 한다
- 각 버전별로 추가된 기능, 수정된 버그, 개선 사항을 명시해야 한다
- 날짜와 버전 번호를 함께 기록해야 한다

---

### 3.4 테스트 용이성 (Testability)

#### NFR-401: 단위 테스트 (Unit Test)
- 모든 주요 함수와 메서드는 단위 테스트를 작성해야 한다
- 테스트 프레임워크: pytest 사용
- 테스트 코드는 `tests/` 디렉토리에 별도로 관리되어야 한다
- 테스트 파일명 형식: `test_모듈명.py`
- 테스트 커버리지 목표: 60% 이상

#### NFR-402: 테스트 가능한 코드 작성
- 함수는 가능한 한 순수 함수(pure function)로 작성해야 한다
- 입력과 출력이 명확하고 부작용(side effect)이 최소화되어야 한다
- 의존성 주입(Dependency Injection)을 사용하여 테스트 용이성을 높여야 한다
- 외부 의존성(데이터베이스, 파일 시스템)은 Mock 객체로 대체 가능해야 한다

#### NFR-403: 테스트 케이스 작성
- 각 함수에 대해 다음 테스트 케이스를 작성해야 한다:
  - 정상 동작 테스트 (Happy Path)
  - 경계값 테스트 (Boundary Test)
  - 예외 상황 테스트 (Exception Test)
  - 엣지 케이스 테스트 (Edge Case)

**예시:**
```python
# tests/test_statistics.py
import pytest
from statistics import calculate_wrong_rate

def test_calculate_wrong_rate_normal():
    """정상 케이스: 오답률 계산"""
    assert calculate_wrong_rate(7, 3) == 30.0

def test_calculate_wrong_rate_all_wrong():
    """경계값 테스트: 모두 틀린 경우"""
    assert calculate_wrong_rate(0, 10) == 100.0

def test_calculate_wrong_rate_all_correct():
    """경계값 테스트: 모두 맞은 경우"""
    assert calculate_wrong_rate(10, 0) == 0.0

def test_calculate_wrong_rate_no_history():
    """예외 테스트: 학습 이력이 없는 경우"""
    with pytest.raises(ValueError):
        calculate_wrong_rate(0, 0)
```

#### NFR-404: 테스트 데이터 관리
- 테스트용 샘플 데이터를 별도로 관리해야 한다
- `tests/fixtures/` 디렉토리에 테스트용 CSV 파일, 데이터베이스 파일 저장
- pytest의 fixture 기능을 활용하여 테스트 데이터 준비 및 정리
- 테스트 실행 후 생성된 임시 파일은 자동으로 삭제되어야 한다

#### NFR-405: 통합 테스트 (Integration Test)
- 모듈 간 상호작용을 검증하는 통합 테스트를 작성해야 한다
- 주요 시나리오:
  - 단어 추가 → 학습 → 통계 업데이트 → 결과 확인
  - CSV 업로드 → 학습 → 시험 → 오답 노트 생성
  - 플래시카드 학습 → 개인화 가중치 적용 → 다음 학습 시 반영
- 통합 테스트는 `tests/integration/` 디렉토리에 관리

#### NFR-406: 자동화된 테스트 실행
- 모든 테스트는 명령어 한 줄로 실행 가능해야 한다
  ```bash
  pytest tests/
  ```
- CI/CD 파이프라인에서 자동으로 테스트가 실행되어야 한다 (향후)
- 테스트 실패 시 빌드가 중단되어야 한다

#### NFR-407: 테스트 문서화
- 각 테스트 케이스는 명확한 이름과 docstring을 가져야 한다
- 테스트 목적, 전제 조건, 예상 결과를 문서화해야 한다
- `tests/README.md`에 테스트 실행 방법과 구조를 설명해야 한다

#### NFR-408: 코드 커버리지 측정
- pytest-cov 플러그인을 사용하여 코드 커버리지를 측정해야 한다
- 커버리지 리포트를 HTML 형식으로 생성해야 한다
  ```bash
  pytest --cov=. --cov-report=html tests/
  ```
- 커버리지가 목표(60%) 미만인 모듈을 식별하고 개선해야 한다

#### NFR-409: 성능 테스트
- 대용량 데이터 처리 성능을 테스트해야 한다
- 테스트 시나리오:
  - 10,000개 단어 로딩 시간
  - 10,000개 단어 검색 성능
  - 통계 계산 시간
- 성능 기준을 만족하는지 자동으로 검증해야 한다

#### NFR-410: 회귀 테스트 (Regression Test)
- 기존 기능이 정상 작동하는지 확인하는 회귀 테스트 suite를 유지해야 한다
- 새로운 기능 추가 또는 버그 수정 후 회귀 테스트를 실행해야 한다
- 자동화된 회귀 테스트로 개발 속도 향상

---

## 4. 데이터 요구사항

### 4.1 데이터베이스 설계

#### DR-101: 데이터베이스 선택
- SQLite 사용 (로컬 데이터베이스)
- 데이터베이스 파일 위치: 프로그램 폴더 내 `data/vocabulary.db`
- UTF-8 인코딩 사용

#### DR-102: 주요 테이블 구조

**words 테이블** (단어 정보)
- `word_id` (INTEGER, PRIMARY KEY, AUTOINCREMENT): 고유 ID
- `english` (TEXT, NOT NULL): 영어 단어
- `korean` (TEXT, NOT NULL): 한국어 뜻
- `memo` (TEXT): 개인 메모
- `is_favorite` (INTEGER, DEFAULT 0): 즐겨찾기 여부 (0 또는 1)
- `created_date` (TEXT, NOT NULL): 생성일 (ISO 8601 형식)
- `modified_date` (TEXT): 수정일 (ISO 8601 형식)

**learning_history 테이블** (학습 이력)
- `history_id` (INTEGER, PRIMARY KEY, AUTOINCREMENT): 고유 ID
- `word_id` (INTEGER, NOT NULL, FOREIGN KEY): 단어 ID
- `study_date` (TEXT, NOT NULL): 학습 날짜 (ISO 8601 형식)
- `is_correct` (INTEGER, NOT NULL): 정답 여부 (0 또는 1)
- `response_time` (REAL): 응답 시간 (초)
- `study_type` (TEXT): 학습 유형 (flashcard, exam)

**word_statistics 테이블** (단어별 통계)
- `word_id` (INTEGER, PRIMARY KEY, FOREIGN KEY): 단어 ID
- `total_attempts` (INTEGER, DEFAULT 0): 총 시도 횟수
- `correct_count` (INTEGER, DEFAULT 0): 정답 횟수
- `wrong_count` (INTEGER, DEFAULT 0): 오답 횟수
- `last_study_date` (TEXT): 마지막 학습일
- `next_review_date` (TEXT): 다음 복습 예정일 (향후 기능)

**exam_history 테이블** (시험 이력)
- `exam_id` (INTEGER, PRIMARY KEY, AUTOINCREMENT): 시험 ID
- `exam_date` (TEXT, NOT NULL): 시험 날짜
- `exam_type` (TEXT, NOT NULL): 시험 유형 (단답형, 객관식)
- `total_questions` (INTEGER, NOT NULL): 총 문항 수
- `correct_count` (INTEGER, NOT NULL): 정답 개수
- `score` (REAL, NOT NULL): 점수 (정답률)
- `time_taken` (INTEGER): 소요 시간 (초)

**wrong_note 테이블** (오답 노트)
- `note_id` (INTEGER, PRIMARY KEY, AUTOINCREMENT): 오답 노트 ID
- `word_id` (INTEGER, NOT NULL, FOREIGN KEY): 단어 ID
- `exam_id` (INTEGER, FOREIGN KEY): 시험 ID
- `added_date` (TEXT, NOT NULL): 추가 날짜
- `is_resolved` (INTEGER, DEFAULT 0): 해결 여부 (0 또는 1)

#### DR-103: 데이터 무결성
- 외래 키 제약조건(Foreign Key Constraint)을 설정해야 한다
- NOT NULL 제약조건을 적절히 사용해야 한다
- 중복 데이터 방지를 위한 UNIQUE 제약조건 사용 (필요 시)

#### DR-104: 인덱스 설정
- 검색 성능 향상을 위해 자주 조회되는 컬럼에 인덱스 생성
  - `words.english`
  - `learning_history.word_id`
  - `learning_history.study_date`
  - `word_statistics.word_id`

### 4.2 데이터 백업 및 복구

#### DR-201: 자동 백업
- 시스템은 매일 자동으로 데이터베이스를 백업해야 한다
- 백업 파일 위치: `data/backups/`
- 백업 파일명 형식: `vocabulary_backup_YYYYMMDD.db`
- 최근 7일치 백업 파일을 유지하고 오래된 파일은 자동 삭제

#### DR-202: 수동 백업
- 사용자는 설정 메뉴에서 "지금 백업하기" 기능을 사용할 수 있어야 한다
- 수동 백업 파일은 사용자가 지정한 위치에 저장되어야 한다

#### DR-203: 데이터 복구
- 사용자는 백업 파일을 선택하여 데이터를 복구할 수 있어야 한다
- 복구 전 현재 데이터를 백업할 것인지 확인 메시지를 표시해야 한다
- 복구 성공 여부를 사용자에게 알려야 한다

---

## 5. 제약사항

### 5.1 기술적 제약사항
- 개발 언어: Python 3.8 이상
- 데이터베이스: SQLite 3.x
- 운영체제: Windows 10 이상
- 인터넷 연결: 불필요 (완전 오프라인 작동)
- 최소 사양: Windows 10, 4GB RAM, 100MB 저장 공간

### 5.2 프로젝트 제약사항
- 개발 기간: 7-11주
- 개발 인력: 1-3명
- 예산: 학생 프로젝트 수준 (무료 도구 및 라이브러리 사용)
- 개발 방법론: Agile (반복적 개발, 2주 스프린트)

### 5.3 설계 제약사항
- 단일 사용자 환경 (멀티 유저 미지원)
- 데스크톱 애플리케이션 (웹/모바일 미지원)
- 한국어-영어 단어장에 국한 (초기 버전)

---

## 6. 개발 우선순위

### Phase 1: MVP (최소 기능 제품) - 3-4주
**필수 기능**
- 단어 관리: 추가, 수정, 삭제, 조회 (FR-101~104)
- CSV 업로드/다운로드 (FR-107, 108)
- 플래시카드 학습 기본 기능 (FR-201~205)
- 학습 이력 기록 (FR-301~303)
- 기본 통계 (FR-601, 602)
- 즐겨찾기 (FR-801~803)
- 기본 시험 (FR-401~403, 407)

**비기능 요구사항**
- 오류 로깅 시스템 구현 (NFR-101~105)
- 모듈화 설계 기본 구조 (NFR-201~205)
- 핵심 함수 문서화 (NFR-301~304)
- 주요 함수 단위 테스트 (NFR-401~403)

### Phase 2: 개인화 및 고급 기능 - 2-3주
**추가 기능**
- 개인화 학습 알고리즘 (FR-901~903)
- 오답 노트 시스템 (FR-501~503)
- 학습 목표 관리 (FR-701~703)
- 고급 통계 (FR-603~605)
- 단어 검색 및 필터링 (FR-105, 106)
- 메모 기능 (FR-109)

**비기능 요구사항**
- 통합 테스트 작성 (NFR-405)
- API 문서화 (NFR-306)
- 테스트 커버리지 60% 달성 (NFR-401)

### Phase 3: 완성도 향상 - 1-2주
**추가 기능**
- 객관식 시험 (FR-404)
- 답변 제한 시간 (FR-209, 406)
- 시험 이력 (FR-408)
- UI 개선 (설정 메뉴, 도움말, 단축키) (FR-1001~1004)

**비기능 요구사항**
- 성능 테스트 (NFR-409)
- 회귀 테스트 (NFR-410)
- README 및 CHANGELOG 작성 (NFR-305, 307)

### Phase 4: 배포 준비 - 1주
- 독립 실행 파일 빌드 (PyInstaller 또는 cx_Freeze)
- 사용자 테스트 및 피드백 반영
- 버그 수정 및 안정화
- 설치 가이드 문서 작성

---

## 7. 검증 기준

### 7.1 기능 검증

**단어 관리**
- [ ] 100개 이상의 단어를 CSV로 업로드할 수 있다
- [ ] 단어 추가, 수정, 삭제가 정상 작동한다
- [ ] 검색 및 필터링이 정확히 작동한다

**플래시카드 학습**
- [ ] 영→한, 한→영 모드가 모두 작동한다
- [ ] 순차, 랜덤, 개인화 모드가 정상 작동한다
- [ ] 정답/오답 피드백이 즉시 표시된다
- [ ] 학습 이력이 정확히 기록된다

**시험 기능**
- [ ] 단답형 시험이 정상 작동한다
- [ ] 시험 결과가 정확히 계산된다
- [ ] 틀린 문제가 오답 노트에 추가된다

**통계 및 개인화**
- [ ] 오답률이 정확히 계산된다
- [ ] 통계가 실시간으로 업데이트된다
- [ ] 개인화 알고리즘이 의도대로 작동한다

### 7.2 비기능 검증

**오류 로깅**
- [ ] 모든 중요 이벤트가 로그에 기록된다
- [ ] 예외 발생 시 스택 트레이스가 기록된다
- [ ] 로그 파일이 자동으로 관리된다 (7일치 보관)

**모듈화**
- [ ] 코드가 명확한 계층 구조로 분리되어 있다
- [ ] 각 모듈이 독립적으로 테스트 가능하다
- [ ] 설정이 코드와 분리되어 있다

**문서화**
- [ ] 모든 주요 함수에 docstring이 있다
- [ ] README 문서가 작성되어 있다
- [ ] 코드 주석이 적절히 작성되어 있다

**테스트**
- [ ] 단위 테스트 커버리지가 60% 이상이다
- [ ] 통합 테스트가 주요 시나리오를 검증한다
- [ ] 모든 테스트가 통과한다

---

## 8. 용어 정의

**플래시카드 (Flashcard)**
- 앞면에 질문(영어 또는 한국어), 뒷면에 답(한국어 또는 영어)이 있는 학습 카드

**오답률 (Wrong Rate)**
- (오답 횟수 / 총 학습 횟수) × 100으로 계산되는 비율

**개인화 (Personalization)**
- 사용자의 학습 데이터를 분석하여 취약한 부분을 집중적으로 학습하도록 하는 기능

**가중치 (Weight)**
- 개인화 알고리즘에서 특정 단어가 출제될 확률을 조정하는 값

**세션 (Session)**
- 학습 시작부터 종료까지의 한 번의 학습 단위

**숙지도 (Mastery Level)**
- 단어를 얼마나 잘 알고 있는지를 나타내는 정도 (정답률 기반)

**스트릭 (Streak)**
- 연속으로 학습한 일수

---

## 9. 참고 자료

### 개발 도구
- **Python**: 3.8 이상
- **GUI 프레임워크**: Tkinter / PyQt5 / Kivy (선택)
- **데이터베이스**: SQLite3
- **테스트**: pytest, pytest-cov
- **코드 품질**: Pylint, Flake8
- **빌드**: PyInstaller / cx_Freeze

### 학습 알고리즘 참고
- Spaced Repetition (간격 반복 학습)
- Leitner System
- SM-2 Algorithm (SuperMemo)
- Active Recall (능동적 회상)

### 표준 및 가이드라인
- PEP 8: Python 코딩 스타일 가이드
- ISO 8601: 날짜 및 시간 형식
- RFC 4180: CSV 파일 형식

---

## 10. 승인

| 역할 | 이름 | 서명 | 날짜 |
|-----|------|------|------|
| 프로젝트 매니저 | | | |
| 개발 리더 | | | |
| 검토자 | | | |

---

**문서 끝**

이 요구사항 정의서는 단어장 프로그램 개발의 기준 문서이며, 모든 개발 활동은 이 문서를 기반으로 수행되어야 합니다.

**버전 이력**
- v1.0 (2025-09-29): 초안 작성