# 251020_구현 - 구현 계획서 v1.0.md

**작성일**: 2025-10-20  
**프로젝트명**: 스마트 단어장 (Smart Vocabulary Builder)  
**작성자**: AI Software Student Team  
**문서 유형**: 구현 계획 문서

---

## 목차
1. [구현 개요](#1-구현-개요)
2. [개발 환경 설정](#2-개발-환경-설정)
3. [Phase 1: 핵심 인프라 구축](#3-phase-1-핵심-인프라-구축-1주)
4. [Phase 2: 단어 관리 모듈](#4-phase-2-단어-관리-모듈-1-2주)
5. [Phase 3: 학습 모듈](#5-phase-3-학습-모듈-1-2주)
6. [Phase 4: 시험 및 오답노트](#6-phase-4-시험-및-오답노트-1주)
7. [Phase 5: 통계 및 완성도](#7-phase-5-통계-및-완성도-1주)
8. [Phase 6: 배포 준비](#8-phase-6-배포-준비-3-5일)
9. [구현 원칙](#9-구현-원칙)
10. [테스트 전략](#10-테스트-전략)

---

## 1. 구현 개요

### 1.1 구현 목표
프로젝트 설계 문서를 바탕으로 단계적이고 체계적인 구현 진행

### 1.2 개발 방식
- **점진적 개발**: 200줄 단위로 파일 하나씩 구현
- **테스트 우선**: 각 모듈 완성 후 단위 테스트
- **지속적 통합**: 구현된 부분 즉시 통합 및 검증

### 1.3 전체 일정 요약

| Phase | 기간 | 주요 목표 | 산출물 |
|-------|------|-----------|--------|
| Phase 1 | 1주 | 핵심 인프라 구축 | DB, Logger, Settings, Config |
| Phase 2 | 1-2주 | 단어 관리 모듈 | 단어 CRUD, CSV 관리 |
| Phase 3 | 1-2주 | 학습 모듈 | 플래시카드, 학습 이력 |
| Phase 4 | 1주 | 시험 및 오답노트 | 시험 기능, 오답 관리 |
| Phase 5 | 1주 | 통계 및 완성도 | 통계 화면, UI 개선 |
| Phase 6 | 3-5일 | 배포 준비 | 빌드, 테스트, 문서 |

**총 예상 기간**: 6-8주

---

## 2. 개발 환경 설정

### 2.1 프로젝트 폴더 구조 생성

```bash
# 프로젝트 루트 디렉토리 생성
mkdir smart_vocabulary
cd smart_vocabulary

# 하위 디렉토리 생성
mkdir data logs assets tests
mkdir data/backups
mkdir assets/icons assets/styles
mkdir common word_management learning exam wrong_note statistics utils
```

### 2.2 가상환경 설정

```bash
# 가상환경 생성
python -m venv venv

# 가상환경 활성화 (Windows)
venv\Scripts\activate

# 가상환경 활성화 (Mac/Linux)
source venv/bin/activate
```

### 2.3 requirements.txt 작성

```txt
# GUI 프레임워크
PyQt5==5.15.9
PyQt5-Qt5==5.15.2
PyQt5-sip==12.12.1

# 데이터 처리
pandas==2.0.3

# 패키징
pyinstaller==5.13.0

# 개발 도구
pylint==2.17.4
black==23.7.0
pytest==7.4.0
pytest-cov==4.1.0
```

```bash
# 패키지 설치
pip install -r requirements.txt
```

### 2.4 Git 초기화

```bash
# Git 초기화
git init

# .gitignore 작성
echo "venv/" >> .gitignore
echo "*.pyc" >> .gitignore
echo "__pycache__/" >> .gitignore
echo "data/*.db" >> .gitignore
echo "logs/*.log" >> .gitignore
echo ".pytest_cache/" >> .gitignore
echo "*.spec" >> .gitignore
echo "build/" >> .gitignore
echo "dist/" >> .gitignore

# 첫 커밋
git add .
git commit -m "Initial commit: Project structure"
```

---

## 3. Phase 1: 핵심 인프라 구축 (1주)

### 3.1 목표
공통 서비스 모듈 구현으로 이후 개발 기반 마련

### 3.2 구현 순서

#### 3.2.1 config.py 작성 (1일차)

**파일**: `config.py`  
**목적**: 전역 설정 및 상수 정의  
**예상 줄 수**: ~150줄

**구현 내용**:
- 프로젝트 경로 설정
- 데이터베이스 경로 설정
- 로그 설정
- UI 설정 (윈도우 크기, 색상, 폰트)
- 학습 설정 (기본값)
- 폴더 자동 생성

**테스트**:
- 경로 생성 확인
- 설정값 불러오기 테스트

---

#### 3.2.2 common/logger.py 작성 (1일차)

**파일**: `common/logger.py`  
**목적**: 로깅 시스템 구현  
**예상 줄 수**: ~100줄

**구현 내용**:
```python
# 주요 함수
- setup_logger(): 로거 초기화
- get_logger(name): 모듈별 로거 가져오기
- log_event(level, message): 이벤트 로깅
- log_error(exception): 에러 로깅 (스택 트레이스 포함)
```

**로그 레벨**:
- DEBUG: 개발 중 상세 정보
- INFO: 일반 정보 (프로그램 시작, 종료)
- WARNING: 경고 (비정상이지만 치명적이지 않음)
- ERROR: 오류 (기능 실패)
- CRITICAL: 심각한 오류 (프로그램 중단)

**로그 형식**:
```
[2025-10-20 14:30:15] [INFO] [database] 데이터베이스 연결 성공
[2025-10-20 14:30:16] [ERROR] [word_management] 단어 추가 실패: 중복 단어
```

**테스트**:
- 로그 파일 생성 확인
- 로그 레벨별 기록 확인
- 7일 이상 로그 자동 삭제 확인

---

#### 3.2.3 common/database.py 작성 (2일차)

**파일**: `common/database.py`  
**목적**: 데이터베이스 연결 및 쿼리 관리  
**예상 줄 수**: ~200줄

**구현 내용**:
```python
class DatabaseManager:
    def __init__(self, db_path: str)
    def get_connection() -> sqlite3.Connection
    def execute_query(query: str, params: tuple) -> List[dict]
    def execute_update(query: str, params: tuple) -> int
    def execute_many(query: str, params_list: List[tuple]) -> bool
    def commit() -> bool
    def rollback() -> bool
    def close() -> None
    def initialize_database() -> bool  # DDL 실행
```

**DDL 스크립트 실행**:
- 데이터 설계서의 DDL 스크립트 파일 읽기
- 7개 테이블 생성
- 인덱스 생성
- 기본 설정값 삽입

**테스트**:
- DB 파일 생성 확인
- 테이블 생성 확인
- CRUD 쿼리 테스트

---

#### 3.2.4 common/settings.py 작성 (2일차)

**파일**: `common/settings.py`  
**목적**: 설정 관리 (DB user_settings 테이블 활용)  
**예상 줄 수**: ~150줄

**구현 내용**:
```python
class SettingsManager:
    def __init__(self, db: DatabaseManager)
    def get_setting(key: str) -> str
    def set_setting(key: str, value: str) -> bool
    def get_all_settings() -> dict
    def reset_to_default() -> bool
```

**관리할 설정**:
- daily_word_goal: 일일 학습 목표 단어 수
- daily_time_goal: 일일 학습 목표 시간
- theme: 테마 (light/dark)
- font_size: 폰트 크기
- flashcard_time_limit: 플래시카드 제한 시간
- exam_time_limit: 시험 제한 시간

**테스트**:
- 설정 조회/저장/수정 테스트
- 기본값 복원 테스트

---

#### 3.2.5 데이터베이스 초기화 스크립트 작성 (3일차)

**파일**: `scripts/init_db.py`  
**목적**: DB 초기화 및 샘플 데이터 생성  
**예상 줄 수**: ~100줄

**구현 내용**:
- DDL 스크립트 실행
- 샘플 단어 50개 삽입
- 테스트용 학습 이력 생성

**실행**:
```bash
python scripts/init_db.py
```

**테스트**:
- DB 초기화 성공 여부
- 샘플 데이터 조회

---

#### 3.2.6 단위 테스트 작성 (3일차)

**파일**: 
- `tests/test_logger.py`
- `tests/test_database.py`
- `tests/test_settings.py`

**테스트 내용**:
- Logger: 로그 파일 생성, 로그 기록, 자동 정리
- Database: 연결, CRUD, 트랜잭션
- Settings: 설정 CRUD, 기본값 복원

**실행**:
```bash
pytest tests/ -v
```

---

### 3.3 Phase 1 완료 기준

- [ ] config.py 작성 완료
- [ ] Logger 작동 확인
- [ ] Database 연결 및 쿼리 실행 가능
- [ ] Settings 관리 가능
- [ ] 단위 테스트 모두 통과
- [ ] Git 커밋: "Phase 1: Core infrastructure completed"

---

## 4. Phase 2: 단어 관리 모듈 (1-2주)

### 4.1 목표
단어 CRUD 기능 및 CSV 입출력 구현

### 4.2 구현 순서

#### 4.2.1 word_management/models.py (4일차)

**파일**: `word_management/models.py`  
**예상 줄 수**: ~200줄

**구현 내용**:
```python
class WordModel:
    def __init__(self, db: DatabaseManager)
    def add_word(english, korean, memo) -> int
    def update_word(word_id, english, korean, memo) -> bool
    def delete_word(word_id) -> bool
    def get_word(word_id) -> dict
    def get_all_words(offset, limit) -> List[dict]
    def search_words(keyword) -> List[dict]
    def filter_words(filter_type) -> List[dict]
    def toggle_favorite(word_id) -> bool
    def get_word_count() -> int
```

**테스트**:
- 단어 추가/수정/삭제
- 검색 및 필터링
- 즐겨찾기 토글

---

#### 4.2.2 word_management/controllers.py (5일차)

**파일**: `word_management/controllers.py`  
**예상 줄 수**: ~250줄

**구현 내용**:
```python
class WordController:
    def __init__(self, model: WordModel)
    
    # CRUD
    def create_word(english, korean, memo) -> Result
    def update_word(word_id, data) -> Result
    def delete_word(word_id) -> Result
    def get_word_list(page, filter, sort) -> List[dict]
    
    # CSV
    def import_csv(filepath, encoding) -> ImportResult
    def export_csv(filepath, word_ids) -> bool
    
    # 유효성 검사
    def validate_word(english, korean) -> ValidationResult
```

**유효성 검사**:
- 영어 단어: 빈 값 체크, 최대 100자
- 한국어 뜻: 빈 값 체크, 최대 500자
- 중복 체크

**테스트**:
- CRUD 로직 테스트
- CSV 입출력 테스트
- 유효성 검사 테스트

---

#### 4.2.3 word_management/views.py (6-7일차)

**파일**: `word_management/views.py`  
**예상 줄 수**: ~400줄 (UI 코드는 길어질 수 있음)

**구현 내용**:
```python
class WordListView(QWidget):
    """단어 목록 화면"""
    def __init__(self, controller)
    def setup_ui()
    def load_words()
    def on_add_clicked()
    def on_edit_clicked()
    def on_delete_clicked()
    def on_search_changed()
    def on_filter_changed()
    def on_sort_changed()

class WordDialog(QDialog):
    """단어 추가/수정 다이얼로그"""
    def __init__(self, mode, word_data)
    def setup_ui()
    def validate()
    def get_data() -> dict

class CSVImportDialog(QDialog):
    """CSV 가져오기 다이얼로그"""
    def __init__()
    def setup_ui()
    def select_file()
    def preview_data()
    def import_data()
```

**UI 구성**:
- 단어 목록 테이블 (QTableWidget)
- 검색 입력창 (QLineEdit)
- 필터/정렬 콤보박스 (QComboBox)
- 버튼 (추가/CSV가져오기/CSV내보내기)

**테스트**:
- UI 표시 확인
- 버튼 클릭 이벤트
- 다이얼로그 표시

---

#### 4.2.4 utils/file_handler.py (8일차)

**파일**: `utils/file_handler.py`  
**예상 줄 수**: ~150줄

**구현 내용**:
```python
class CSVHandler:
    def read_csv(filepath, encoding) -> List[dict]
    def write_csv(filepath, data, encoding) -> bool
    def validate_csv(filepath) -> ValidationResult
    def detect_encoding(filepath) -> str

class BackupHandler:
    def create_backup() -> str
    def restore_backup(filepath) -> bool
    def list_backups() -> List[dict]
    def cleanup_old_backups(days) -> int
```

**테스트**:
- CSV 읽기/쓰기
- 인코딩 감지
- 백업 생성/복원

---

### 4.3 Phase 2 완료 기준

- [ ] 단어 CRUD 모두 작동
- [ ] CSV 가져오기/내보내기 작동
- [ ] 단어 목록 화면 정상 표시
- [ ] 검색/필터링/정렬 작동
- [ ] 단위 테스트 모두 통과
- [ ] Git 커밋: "Phase 2: Word management module completed"

---

## 5. Phase 3: 학습 모듈 (1-2주)

### 5.1 목표
플래시카드 학습 기능 및 학습 이력 관리

### 5.2 구현 순서

#### 5.2.1 learning/models.py (9일차)

**파일**: `learning/models.py`  
**예상 줄 수**: ~200줄

**구현 내용**:
```python
class LearningModel:
    def __init__(self, db: DatabaseManager)
    
    # 학습 이력
    def add_learning_history(word_id, is_correct, response_time) -> int
    def get_learning_history(word_id) -> List[dict]
    def get_today_stats() -> dict
    
    # 단어 선택
    def get_words_for_learning(mode, count, order) -> List[dict]
```

**테스트**:
- 학습 이력 추가
- 통계 조회
- 단어 선택 로직

---

#### 5.2.2 common/personalization.py (10일차)

**파일**: `common/personalization.py`  
**예상 줄 수**: ~150줄

**구현 내용**:
```python
class PersonalizationEngine:
    def __init__(self, db: DatabaseManager)
    
    def calculate_weights(words) -> dict
    def get_weighted_words(words, count) -> List[dict]
    def update_ease_factor(word_id, is_correct) -> None
```

**가중치 알고리즘 (간단한 버전)**:
```
가중치 = 기본가중치(1.0) + 오답률 보너스
오답률 보너스 = (오답횟수 / 총시도횟수) * 2.0
```

**테스트**:
- 가중치 계산
- 가중치 기반 단어 선택

---

#### 5.2.3 learning/controllers.py (11일차)

**파일**: `learning/controllers.py`  
**예상 줄 수**: ~200줄

**구현 내용**:
```python
class LearningController:
    def __init__(self, model, personalization)
    
    def start_session(config) -> SessionData
    def get_next_card() -> CardData
    def submit_answer(is_correct, time) -> None
    def end_session() -> SessionResult
    def pause_session() -> None
    def resume_session() -> None
```

**SessionData**:
- mode: 영→한 / 한→영
- order: 순차 / 랜덤 / 개인화
- words: 학습할 단어 리스트
- current_index: 현재 위치
- results: 결과 리스트

**테스트**:
- 세션 시작/종료
- 카드 넘기기
- 답변 제출

---

#### 5.2.4 learning/views.py (12-14일차)

**파일**: `learning/views.py`  
**예상 줄 수**: ~500줄 (플립 애니메이션 포함)

**구현 내용**:
```python
class LearningSettingsView(QWidget):
    """학습 설정 화면"""
    def __init__(self, controller)
    def setup_ui()
    def on_start_clicked()

class FlashCardView(QWidget):
    """플래시카드 화면 (플립 방식)"""
    def __init__(self, controller)
    def setup_ui()
    def show_front()  # 문제 표시
    def flip_card()    # 플립 애니메이션
    def show_back()    # 정답 표시
    def on_correct()
    def on_wrong()
    def next_card()
    
class SessionResultDialog(QDialog):
    """학습 완료 요약"""
    def __init__(self, result)
    def setup_ui()
```

**플립 애니메이션** (QPropertyAnimation 사용):
```python
def flip_card(self):
    # 3D 플립 효과 (QGraphicsEffect)
    # 0.3초 애니메이션
    # ease-in-out 곡선
```

**테스트**:
- 화면 전환
- 플립 애니메이션
- 버튼 이벤트

---

### 5.3 Phase 3 완료 기준

- [ ] 플래시카드 학습 작동
- [ ] 플립 애니메이션 정상 작동
- [ ] 학습 이력 기록
- [ ] 개인화 알고리즘 적용
- [ ] 단위 테스트 모두 통과
- [ ] Git 커밋: "Phase 3: Learning module completed"

---

## 6. Phase 4: 시험 및 오답노트 (1주)

### 6.1 목표
시험 기능 및 오답 노트 구현

### 6.2 구현 순서

#### 6.2.1 exam/models.py (15일차)

**파일**: `exam/models.py`  
**예상 줄 수**: ~250줄

**구현 내용**:
```python
class ExamModel:
    def __init__(self, db: DatabaseManager)
    
    # 시험
    def create_exam(exam_type, word_ids) -> int
    def save_exam_result(exam_id, results) -> bool
    def get_exam_history() -> List[dict]
    
    # 문제 생성
    def generate_questions(words, exam_type) -> List[dict]
    def generate_choices(correct_word, all_words) -> List[str]
```

**테스트**:
- 시험 생성
- 문제 생성
- 객관식 선지 생성

---

#### 6.2.2 exam/controllers.py (16일차)

**파일**: `exam/controllers.py`  
**예상 줄 수**: ~200줄

**구현 내용**:
```python
class ExamController:
    def __init__(self, model)
    
    def start_exam(config) -> ExamData
    def submit_answer(question_id, answer) -> None
    def finish_exam() -> ExamResult
    def grade_exam() -> dict
```

**채점 로직**:
- 단답형: 대소문자 구분 없이 비교
- 객관식: 선택 번호 비교
- 오답 자동으로 오답노트에 추가

**테스트**:
- 시험 시작/종료
- 답변 제출
- 채점

---

#### 6.2.3 exam/views.py (17-18일차)

**파일**: `exam/views.py`  
**예상 줄 수**: ~400줄

**구현 내용**:
```python
class ExamSettingsView(QWidget):
    """시험 설정 화면"""

class ExamProgressView(QWidget):
    """시험 진행 화면"""
    - 단답형 버전
    - 객관식 버전

class ExamResultView(QWidget):
    """시험 결과 화면"""
```

---

#### 6.2.4 wrong_note/models.py + views.py (19일차)

**파일**: 
- `wrong_note/models.py` (~150줄)
- `wrong_note/views.py` (~250줄)

**구현 내용**:
```python
# models.py
class WrongNoteModel:
    def add_wrong_word(word_id, exam_id) -> int
    def get_wrong_words(filter) -> List[dict]
    def mark_resolved(note_id) -> bool

# views.py
class WrongNoteView(QWidget):
    """오답노트 화면"""
    - 오답 목록 테이블
    - 필터링 (미해결/해결)
    - 복습 시작 버튼
```

---

### 6.3 Phase 4 완료 기준

- [ ] 단답형 시험 작동
- [ ] 객관식 시험 작동
- [ ] 채점 및 결과 표시
- [ ] 오답노트 자동 추가
- [ ] 오답노트 화면 작동
- [ ] Git 커밋: "Phase 4: Exam and wrong note completed"

---

## 7. Phase 5: 통계 및 완성도 (1주)

### 7.1 목표
통계 화면 구현 및 UI/UX 개선

### 7.2 구현 순서

#### 7.2.1 statistics/models.py (20일차)

**파일**: `statistics/models.py`  
**예상 줄 수**: ~200줄

**구현 내용**:
```python
class StatisticsModel:
    def get_today_stats() -> dict
    def get_overall_stats() -> dict
    def get_mastery_distribution() -> dict
    def get_weak_words(limit) -> List[dict]
    def get_daily_learning_trend(days) -> List[dict]
```

---

#### 7.2.2 statistics/views.py (21-22일차)

**파일**: `statistics/views.py`  
**예상 줄 수**: ~400줄

**구현 내용**:
```python
class StatisticsView(QWidget):
    """통계 대시보드"""
    - 오늘 통계 요약
    - 일일 학습량 추이 그래프
    - 숙지도 분포 파이 차트
    - 취약 단어 TOP 10 막대 그래프
```

**그래프 라이브러리**: matplotlib 또는 PyQtGraph

---

#### 7.2.3 대시보드 탭 구현 (23일차)

**파일**: `dashboard/views.py`  
**예상 줄 수**: ~300줄

**구현 내용**:
- 오늘 학습 현황
- 빠른 시작 버튼
- 취약 단어 TOP 5
- 최근 학습 기록

---

#### 7.2.4 main.py 및 메인 윈도우 (24일차)

**파일**: `main.py`  
**예상 줄 수**: ~250줄

**구현 내용**:
```python
class MainWindow(QMainWindow):
    def __init__()
    def setup_ui()
    def create_menu_bar()
    def create_tool_bar()
    def create_tabs()
    def create_status_bar()
    
def main():
    app = QApplication(sys.argv)
    window = MainWindow()
    window.show()
    sys.exit(app.exec_())
```

**탭 구성**:
1. 대시보드
2. 단어관리
3. 학습
4. 시험
5. 오답노트
6. 통계

---

### 7.3 Phase 5 완료 기준

- [ ] 통계 화면 작동
- [ ] 대시보드 화면 작동
- [ ] 메인 윈도우 탭 전환
- [ ] 메뉴바/툴바/상태바 작동
- [ ] Git 커밋: "Phase 5: Statistics and UI polishing completed"

---

## 8. Phase 6: 배포 준비 (3-5일)

### 8.1 목표
실행 파일 빌드 및 최종 테스트

### 8.2 작업 내역

#### 8.2.1 통합 테스트 (25일차)

**파일**: `tests/test_integration.py`

**테스트 시나리오**:
1. 단어 추가 → 학습 → 통계 확인
2. CSV 업로드 → 시험 → 오답노트 생성
3. 플래시카드 학습 → 개인화 반영 확인

---

#### 8.2.2 PyInstaller 빌드 (26일차)

**빌드 스크립트**: `build.spec`

```bash
# 빌드 명령
pyinstaller --onefile --windowed \
    --name "스마트단어장" \
    --icon=